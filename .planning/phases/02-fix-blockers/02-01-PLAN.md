---
phase: 02-fix-blockers
plan: 01
type: execute
---

<objective>
Re-trigger Konflux on-push pipelines for 8 stale components to rebuild images before release.

Purpose: Konflux container images expire after 72 hours. 8 of 11 components have images older than 72h and need fresh builds for the 1.15.4 release.
Output: All 8 stale components have new commits pushed, triggering Konflux on-push pipelines.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-assessment/KONFLUX-FRESHNESS-REPORT.md
@.planning/phases/01-assessment/01-02-SUMMARY.md

**From Phase 1 Assessment:**
- 8 stale components identified (>72h since last commit on release branch)
- Recommended method: empty commit to trigger on-push pipeline
- Branch: release-v1.15.x for all components (except manual-approval-gate which is fresh)

**Stale Components (all need empty commits):**
1. tektoncd-pipeline - release-v1.15.x - 2263h stale
2. tektoncd-triggers - release-v1.15.x - 2504h stale
3. tektoncd-chains - release-v1.15.x - 2505h stale
4. tektoncd-results - release-v1.15.x - 2505h stale
5. tektoncd-hub - release-v1.15.x - 2505h stale
6. tektoncd-cli - release-v1.15.x - 1934h stale
7. pac-downstream - release-v1.15.x - 1935h stale
8. tektoncd-git-clone - release-v1.15.x - 2505h stale
</context>

<tasks>

<task type="auto">
  <name>Task 1: Push empty commits to 4 core components</name>
  <files>External: tektoncd-pipeline, tektoncd-triggers, tektoncd-chains, tektoncd-results repos</files>
  <action>
For each of: tektoncd-pipeline, tektoncd-triggers, tektoncd-chains, tektoncd-results:
1. Clone the release-v1.15.x branch with depth=1
2. Create an empty commit with message "chore: trigger Konflux rebuild for 1.15.4 release"
3. Push the commit

Use a temp directory to avoid cluttering current workspace. Example:
```bash
cd /tmp
for repo in tektoncd-pipeline tektoncd-triggers tektoncd-chains tektoncd-results; do
  git clone --depth=1 -b release-v1.15.x https://github.com/openshift-pipelines/${repo}.git
  cd ${repo}
  git commit --allow-empty -m "chore: trigger Konflux rebuild for 1.15.4 release"
  git push
  cd ..
  rm -rf ${repo}
done
```

**Important:** If push fails due to permissions, note which repos failed - user may need to push manually or grant access.
  </action>
  <verify>
For each repo, verify the commit exists on GitHub:
```bash
for repo in tektoncd-pipeline tektoncd-triggers tektoncd-chains tektoncd-results; do
  gh api repos/openshift-pipelines/${repo}/commits/release-v1.15.x --jq '.commit.message' | head -1
done
```
Should show "chore: trigger Konflux rebuild for 1.15.4 release" for each.
  </verify>
  <done>4 core components have empty commits pushed, Konflux on-push pipelines triggered</done>
</task>

<task type="auto">
  <name>Task 2: Push empty commits to 4 remaining components</name>
  <files>External: tektoncd-hub, tektoncd-cli, pac-downstream, tektoncd-git-clone repos</files>
  <action>
For each of: tektoncd-hub, tektoncd-cli, pac-downstream, tektoncd-git-clone:
1. Clone the release-v1.15.x branch with depth=1
2. Create an empty commit with message "chore: trigger Konflux rebuild for 1.15.4 release"
3. Push the commit

Use same pattern as Task 1:
```bash
cd /tmp
for repo in tektoncd-hub tektoncd-cli pac-downstream tektoncd-git-clone; do
  git clone --depth=1 -b release-v1.15.x https://github.com/openshift-pipelines/${repo}.git
  cd ${repo}
  git commit --allow-empty -m "chore: trigger Konflux rebuild for 1.15.4 release"
  git push
  cd ..
  rm -rf ${repo}
done
```

**Note on tektoncd-cli:** PR #903 is open on this repo with the oauth2 CVE fix. The empty commit goes to release-v1.15.x branch directly, not the PR branch. This is intentional - the PR will be handled in 02-02.
  </action>
  <verify>
For each repo, verify the commit exists on GitHub:
```bash
for repo in tektoncd-hub tektoncd-cli pac-downstream tektoncd-git-clone; do
  gh api repos/openshift-pipelines/${repo}/commits/release-v1.15.x --jq '.commit.message' | head -1
done
```
Should show "chore: trigger Konflux rebuild for 1.15.4 release" for each.
  </verify>
  <done>All 8 stale components have empty commits pushed, Konflux on-push pipelines triggered</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All 8 repos show the new commit on release-v1.15.x branch
- [ ] No push failures (or failures documented for follow-up)
- [ ] Commits visible in GitHub commit history for each repo
</verification>

<success_criteria>

- All 8 stale components have new commits on release-v1.15.x branch
- Commits trigger Konflux on-push pipelines (pipelines will start automatically)
- Any push failures documented for manual resolution
</success_criteria>

<output>
After completion, create `.planning/phases/02-fix-blockers/02-01-SUMMARY.md`:

# Phase 2 Plan 1: Re-trigger Stale Pipelines Summary

**[One-liner describing outcome]**

## Accomplishments

- [Components successfully triggered]
- [Any issues encountered]

## Components Triggered

| Component | Branch | Commit | Status |
|-----------|--------|--------|--------|
| tektoncd-pipeline | release-v1.15.x | [sha] | Pushed |
| ... | ... | ... | ... |

## Issues Encountered

[Any push failures or problems]

## Next Step

Ready for 02-02-PLAN.md (Diagnose PR #903 Konflux failure)
</output>
