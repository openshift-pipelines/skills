---
phase: 03.5-dev-release-v2
plan: 4
total_plans: 4
status: blocked
last_updated: 2026-01-23T14:35:00Z
---

<current_state>
Executing Plan 03.5-04 (OCP Version Support). PR #14451 created but CI failing because Konflux Applications/Components for 4.19, 4.20, 4.21 don't exist in the Konflux cluster yet.

**Key discovery:** The hack repo generates files with a DIFFERENT naming convention than 1.15.x uses:
- Hack repo (new): `openshift-pipelines-index-4-19-1-15`
- 1.15.x (old): `operator-1-15-index-4-19-application`

We fixed the .tekton files manually based on 4.18 pattern, but the Konflux resources need to be registered.
</current_state>

<completed_work>

## Plan 03.5-01: Add CPE Labels ✓
- p12n-manual-approval-gate: PR #44 merged
- pac-downstream: Already had labels (no changes needed)

## Plan 03.5-04: OCP Version Support - PARTIAL
- ✓ Created PR #14451 with correct file structure
- ✓ Fixed .tekton files to use 1.15.x naming pattern (dashes not dots)
- ✓ Added Konflux configs for 4.19, 4.20, 4.21
- ✓ Added OLM catalog directories for 4.19, 4.20, 4.21
- ✓ Removed EOL versions 4.12, 4.14, 4.15
- ✗ CI failing - Konflux components not registered

## Hack Repo Investigation
- Discovered hack repo only manages `next` and `1.22` (not 1.15)
- 1.15 uses older naming conventions
- Decided on Option C: manual fix based on 4.18 pattern (not retrofitting hack repo)
</completed_work>

<remaining_work>

## Plan 03.5-04: Register Konflux Components (BLOCKED)
Need to apply these configs to Konflux cluster:
```bash
kubectl apply -f .konflux/index-configurations/application-index-4.19.yaml
kubectl apply -f .konflux/index-configurations/component-index-4.19.yaml
kubectl apply -f .konflux/index-configurations/application-index-4.20.yaml
kubectl apply -f .konflux/index-configurations/component-index-4.20.yaml
kubectl apply -f .konflux/index-configurations/application-index-4.21.yaml
kubectl apply -f .konflux/index-configurations/component-index-4.21.yaml
```

## Plan 03.5-02: Monitor FIPS Rebuild (CHECKPOINT)
- Still pending - need to verify new nop SHA available

## Plan 03.5-03: Copy Images (USER REQUESTED STOP)
- User requested to stop BEFORE this plan
- Will copy images after Plans 02 and 04 complete
</remaining_work>

<decisions_made>

1. **Option C for OCP versions** - Manual fix based on 4.18 pattern instead of updating hack repo
   - Rationale: 1.15 is maintenance release, different naming conventions, faster to fix manually

2. **No Claude attribution** - User requested commits without Co-Authored-By

3. **Naming convention** - Use dashes (`4-19`) not dots (`4.19`) to match existing 1.15.x pattern

4. **Stop before image copy** - User requested to execute OCP versions first, stop before Plan 03.5-03
</decisions_made>

<blockers>

1. **Konflux components not registered** - PR #14451 CI fails because 4.19/4.20/4.21 Applications/Components don't exist in Konflux cluster
   - Need: Konflux cluster access to `kubectl apply` the configs
   - Alternative: Find someone with access or use hack repo's `konflux-apply` workflow

2. **Expected behavior** - Only new version pipelines run (4.19/20/21), not 4.16/17/18
   - CEL expressions only trigger when specific version files change
   - This is correct - we only modified new versions
</blockers>

<context>
**Mental state:** Hit infrastructure blocker. The code changes are correct (verified naming pattern matches 4.18), but Konflux needs the Application/Component resources registered before pipelines can run.

**PR Status:**
- PR #14451: https://github.com/openshift-pipelines/operator/pull/14451
- CI: 3 failures (4.19, 4.20, 4.21) - all fail in 5-6 seconds (component not found)
- Files: 36 changed (correct structure)

**Hack Repo Findings:**
- `config/downstream/konflux.yaml` - versions: ["next", "1.22"]
- `config/downstream/applications/index.yaml` - has 4.16-4.20, 4.21 commented
- `config/downstream/repos/operator-index-4.XX.yaml` - per-version configs
- `cmd/konflux-apply/` - tool to apply configs (needs cluster access)

**Operator repo location:** `/tmp/operator-ocp-update` (working branch: `ocp-version-support-update`)
</context>

<next_action>
Resume with `/gsd:resume-work`. First actions:

1. **Get Konflux cluster access** to register new components:
   ```bash
   # Login to Konflux
   oc login <konflux-cluster>

   # Apply configs
   kubectl apply -f .konflux/index-configurations/application-index-4.19.yaml
   kubectl apply -f .konflux/index-configurations/component-index-4.19.yaml
   # ... repeat for 4.20, 4.21
   ```

2. **Or ask someone with access** to register the components

3. **After components registered:** Re-run PR CI, should pass

4. **Then continue with:**
   - Plan 03.5-02: Verify FIPS rebuild (checkpoint)
   - STOP before Plan 03.5-03 (per user request)
</next_action>

---

*Paused: 2026-01-23T14:35:00Z*
*Resume: `/gsd:resume-work`*
